<div class="container">
    <v-btn color="primary" @click="newType">
        <font-awesome-icon icon="plus-square" size="lg" />
        New Data Collection
    </v-btn>
    <br/><br />
    <div class="list-group">
        <v-card 
            class="mb-10"
            v-for="(type, i) in topLevelProjects" 
            :key="type.id">
            <type-card
                :obj="type"
                v-on:edit="editType">
                <div v-if="getTypeChildren(type.id).length">
                    <v-divider></v-divider>
                    <v-list three-line class="ml-10">
                        <template v-for="(childType, j) in getTypeChildren(type.id)">
                            <type-card 
                                :key="childType.id"
                                :obj="childType"
                                v-on:edit="editType">
                            </type-card>
                        </template>
                    </v-list>
                </div>
            </type-card>
            </v-list>
        </v-card>
    </div>
    <modal name="editTypeModal" 
            height="auto">
        <div v-if="editingType">
            <label>Collection Name</label><br/>
            <input v-model="editingType.name"><br />

            <label>Collection URL</label><br />
            <input v-model="editingType.codename"><br />

            <label>Order</label><br />
            <input v-model="editingType.menu_order"><br />

            <label>Parent</label><br />
            <select v-model="editingType.parent_id">
                <option v-for="(p, k) in possibleParents"
                    :value="p.id"
                    :key="p.id">{{ p.name }}</option>
            </select>
            <br/><br/>
            <button class="btn btn-primary" @click="saveType">
                Save
            </button>
        </div>
    </modal>
</div>