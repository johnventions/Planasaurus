<div>
    <v-navigation-drawer 
        on-drawer 
        color="primary"
        v-if="authenticated"
        v-model="drawer" app dark>
        <v-sheet light color="grey lighten-4" class="pa-2">
            <v-menu offset-y>
                <template v-slot:activator="{ on, attrs }">
                  <v-btn
                    text
                    v-bind="attrs"
                    v-on="on"
                  >
                        {{ getWorkspace.name }}
                  </v-btn>
                </template>
                <v-sheet>
                    <v-list>
                        <v-subheader>Switch Workspace</v-subheader>
                        <v-list-item 
                            v-for="ws in user.workspaces"
                            v-on:click="changeWorkspace(ws.id)"
                            :key="ws.id">
                            <v-list-item-title>{{ws.name}}</v-list-item-title>
                        </v-list-item>
                        <v-divider/>
                        <v-list-item>
                            <v-list-item-title>Workspace Settings</v-list-item-title>
                        </v-list-item>
                    </v-list>
                </v-sheet>
              </v-menu>
        </v-sheet>
        <v-list dense nav> 
            <v-list-item to="/dash/" link>
                <v-list-item-icon>
                    <v-icon small>{{ 'mdi-home' }}</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                    <v-list-item-title>Home</v-list-item-title>
                </v-list-item-content>
            </v-list-item>
            <v-list-item v-for="item in navItems" :key="item.id" :to="parseUrl(item)" link>
                <v-list-item-icon>
                    <v-icon small>{{ 'mdi-view-dashboard' }}</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                    <v-list-item-title>{{ item.name }}</v-list-item-title>
                </v-list-item-content>
            </v-list-item>
            <v-divider color="grey"/>
            <v-list-item class="mt-3" to="/dash/configure" link>
                <v-list-item-icon>
                    <v-icon small>{{ 'mdi-pencil' }}</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                    <v-list-item-title>Data Types</v-list-item-title>
                </v-list-item-content>
            </v-list-item>
            <v-list-item class="mt-3" v-on:click="startShare" link>
                <v-list-item-icon>
                    <v-icon small>{{ 'mdi-share-variant' }}</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                    <v-list-item-title>Sharing</v-list-item-title>
                </v-list-item-content>
            </v-list-item>
        </v-list>
        <template v-slot:append>
            <div class="pa-2 text-center">
              <v-btn block color="black">
                Logout
              </v-btn>
            </div>
          </template>
          <v-dialog v-model="sharingDialog" max-width="750">
              <v-card>
                  <v-card-title>
                      Share your workspace
                  </v-card-title>
                  <v-card-text>
                      <v-text-field
                        label="yourfriend@emai.com"
                        v-model="shareTo">
                      </v-text-field>
                      <v-card-actions>
                        <v-spacer/>
                        <v-btn 
                            v-on:click="sendInvite"
                            text 
                            color="green">
                            Share
                        </v-btn>
                        </v-card-actions>
                    </v-card-text>
                  <v-list subheader>
                      <v-subheader>Shared with:</v-subheader>
                      <v-list-item v-for="(shared, i) in workspaceSharedTo" :key="i">
                        <v-list-item-content>
                            <v-list-item-title>
                                {{ shared.email }}
                            </v-list-item-title>
                        </v-list-item-content>
                        <v-list-item-action class="d-inline">
                            {{ shared.accepted ? 'Shared' : 'Pending'}}
                            <v-icon color="green lighten-1" v-if="shared.accepted">mdi-check</v-icon>
                            <v-icon color="grey lighten-1" v-else>mdi-information</v-icon>
                        </v-list-item-action>
                      </v-list-item>
                  </v-list>
              </v-card>
          </v-dialog>
    </v-navigation-drawer>
</div>